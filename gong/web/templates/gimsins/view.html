{% extends '/gimsins/index.html' %}
{% import '/base/galleries.html' as galleries %}
{% import '/base/name-utils.html' as name_utils %}


{% block title %}{{ name_utils.get_object_name(gimsin) }}{% endblock %}
{% block dashboard_title %}GimSin{% endblock %}

{% block breadcrumbs %}
  {% if request.endpoint == 'gimsins.index' %}
    <div class="active section">GimSin</div>
  {% else %}
    <a class="section" href="{{ url_for('gimsins.index') }}">GimSin</a>
    <div class="divider"> / </div>
  {% endif %}
{% endblock %}

{% block content %}
  {% if current_user.is_authenticated %}
  <div class="ui segment">
    <a class="ui icon primary button" href="{{ url_for('gimsins.index') }}"><i class="ui yin yang icon"></i> Gong</a>
    <a class="ui icon primary button" href="{{ url_for('gimsins.create_or_edit') }}"><i class="edit icon"></i> Edit</a>
    <a class="ui icon primary button" href="{{ url_for('pictures.manage', type_='gimsin', type_id=gimsin.id) }}"><i class="image icon"></i> Edit</a>
  </div>
 {% endif %}

  <div class="ui segment huge">
    <h1>{{ name_utils.get_object_name(gimsin) }}</h1>

    <div class="ui placeholder segment">
      <div class="ui two column stackable center aligned grid">
        <div class="ui vertical divider"><i class="broadcast tower icon large"></i></div>
        <div class="middle aligned row">
          <div class="column">
            <div class="ui icon header">
              <i class="users icon red"></i>
              {% for clan in [gimsin.gong.clan, gimsin.gong.clan_zh, gimsin.gong.clan_en] %}
                {% if clan %}
                  <a href="{{ url_for('gongs.show_by_clan', clan=clan) }}" class="ui label red circular massive">{{ clan }}</a>
                {% endif %}
              {% endfor %}

            </div>
            <div>
            </div>
          </div>
          <div class="column">
            <div class="ui icon header">
              <i class="torii gate icon"></i>
              <a href="{{ url_for('gimsins.view', gimsin_id=gimsin.id) }}">{{ gimsin.shrine.name }}</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    {% if gimsin.biography %}
    <div class="ui message">
      {{ gimsin.biography }}
    </div>
    {% endif %}

    <div>
      {{ galleries.render_cards(gimsin) }}
    </div>

  </div>
{% endblock %}
